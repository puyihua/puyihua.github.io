<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>jekyll初体验 - Puyh</title>
  <link rel="alternate" hreflang="en" href="http://localhost:1313/" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">


<meta name="author" content="Puyh" />
  <meta name="description" content="缘由 我在debug的过程中遇到了各种问题，当我对错误信息进行搜索时，总是会在一些个人blog上得到巧妙的解答，这让我感觉blog不仅是记录自" />







<meta name="generator" content="Hugo 0.53" />


<link rel="canonical" href="http://localhost:1313/post/2017-02-03-jekyll%E5%88%9D%E4%BD%93%E9%AA%8C/" />



<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="jekyll初体验" />
<meta property="og:description" content="缘由 我在debug的过程中遇到了各种问题，当我对错误信息进行搜索时，总是会在一些个人blog上得到巧妙的解答，这让我感觉blog不仅是记录自" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2017-02-03-jekyll%E5%88%9D%E4%BD%93%E9%AA%8C/" /><meta property="article:published_time" content="2017-02-03T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2017-02-03T00:00:00&#43;00:00"/>

<meta itemprop="name" content="jekyll初体验">
<meta itemprop="description" content="缘由 我在debug的过程中遇到了各种问题，当我对错误信息进行搜索时，总是会在一些个人blog上得到巧妙的解答，这让我感觉blog不仅是记录自">


<meta itemprop="datePublished" content="2017-02-03T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2017-02-03T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="3399">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="jekyll初体验"/>
<meta name="twitter:description" content="缘由 我在debug的过程中遇到了各种问题，当我对错误信息进行搜索时，总是会在一些个人blog上得到巧妙的解答，这让我感觉blog不仅是记录自"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Puyh</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">Puyh</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        
        <a class="menu-item-link" href="/">Home</a>
        
      </li><li class="menu-item">
        
        <a class="menu-item-link" href="/post/">Archives</a>
        
      </li><li class="menu-item">
        
        <a class="menu-item-link" href="/about/">About</a>
        
      </li>
  </ul>
</nav>
  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">jekyll初体验</h1>
      
      <div class="post-meta">
        <span class="post-time"> 2017-02-03 </span>
        
        <span class="more-meta"> 3399 words </span>
        <span class="more-meta"> 7 min read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#缘由">缘由</a></li>
<li><a href="#过程">过程</a>
<ul>
<li><a href="#环境">环境</a></li>
<li><a href="#本地搭建">本地搭建</a></li>
<li><a href="#部署到-github-pages">部署到 Github Pages</a></li>
<li><a href="#主题">主题</a></li>
<li><a href="#部署到puyh-pub">部署到puyh.pub</a></li>
<li><a href="#第一条post">第一条post</a></li>
</ul></li>
<li><a href="#最后">最后</a></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h1 id="缘由">缘由</h1>

<p>我在debug的过程中遇到了各种问题，当我对错误信息进行搜索时，总是会在一些个人blog上得到巧妙的解答，这让我感觉blog不仅是记录自己的一个地方，也可以成为大牛们普度众生的方式。一种对blog的崇拜之情油然而生（当然很久之前我就有了让人尴尬的QQ blog）。我想，如果我以后成为了像他们一样酷的人，代码啊，照片啊，搞机经历啊，心路历程啊，需要有个地方来放一下，那么blog一定是不会少的。早晚都得有，那就趁着假期准备托福不务正业的时候把它给搞掉。</p>

<p>还想说一下现在的blog名字，AWESOME TITLE，这个名字可能看起来有点僵硬，其实没有别的意思，只是觉得这个title本身就很awesome。当用jekyll生成站点的时候，它的默认标题上写着“Your awesome title”，哈哈，很懂事，很搞笑，我要留下来，恩，所以这个名字就这么来了。</p>

<p>Uncle Wang，就是王叔叔，也就是隔壁老王吧。那里面有的是我的启蒙老师，有的是我的学长，有的是我的基友，他们都喜欢代码，现在或者以后也会有自己的blog，uncleWang的存在就是给他们的友情链接。如果非要问为啥用隔壁老王，我只能说那里面有一位带我入门的很强的学长姓王，但是他们跟我没有任何血缘上的关系。</p>

<h1 id="过程">过程</h1>

<p>让我用一句话总结搭建这个blog的过程，那就是</p>

<blockquote>
<p>在平坦的路面上曲折前行。</p>
</blockquote>

<h2 id="环境">环境</h2>

<ul>
<li>Ubuntu 16.04 LTS (laptop)</li>
<li>Ubuntu 14.04 LTS (server)</li>
<li>Ruby 2.3.1p112</li>
<li>jekyll 3.3.1</li>
<li>Git 2.7.4</li>
<li>Apache 2.4.12</li>
<li><strong>Scientific Internet</strong></li>
</ul>

<h2 id="本地搭建">本地搭建</h2>

<p>在本地的搭建可以说是十分简单的，只需要敲几条命令(当然了我说的是在类unix环境下)，一个jekyll site就诞生了。  主要的Reference: <a href="https://jekyllrb.com/docs/quickstart/">Jekyll Docs</a>。直到这一步我的搞事之路还是顺利的。</p>

<h2 id="部署到-github-pages">部署到 Github Pages</h2>

<p>本地运行一下<code>bundle exex jekyll build</code>，就可以在本机访问自己的blog啦。怎么把它挂到网上让别人也能看到呢？这就牵扯到部署(你就架个静态blog你好意思用这两个字？)了。我自己呢部署在了两个地方，Github Pages和我的个人域名puyh.pub (puyh-&gt;pu艺华咯)。</p>

<p>Github Pages的部署可以说的是相当简单的，你只需要按照<a href="https://pages.github.com/">Github Pages</a>走一遍，然后再把你的jekyll目录add-commit-push到你的page repo，稍微等几秒，如果不出错，直接访问的pages就可以看到你的blog已经屹立在world wide web上了(md成就感爆棚啊)。</p>

<p>然而并没有那么顺利，我进行了第四次对于<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/">廖雪峰老师Git教程</a>的学习(我是金鱼只有7s记忆蟹蟹)，把git又给重新学了一遍。</p>

<p>后面我再说个人服务器部署的问题。</p>

<h2 id="主题">主题</h2>

<p>可能你会想了，我这个blog如此简洁(简陋)，还用啥主题？但是事实就是如此，我不仅用了，还在上下了一番功夫。</p>

<p>一开始我是图省事的，看到了github settings里有几款自带的主题，我以为只要点点鼠标就可以用了十分的开心，结果点了之后网站崩掉。</p>

<p>后来我发先，github自带的主题只有一个layout(翻译成模板感觉不太准确？)，就是<code>default.html</code>(参见<a href="https://github.com/pages-themes/cayman">pages-themes/cayman</a>)，但是你之前的网站已经用了<code>home.html</code>,<code>pages.html</code>等等layouts，而且自带的主题并没有<code>_include</code>文件夹，所以默认主题的include全都挂掉。所以你的网站就跪掉(在repo commits里面看到跪掉的情况)。</p>

<p>但是我不死心(钻牛角尖)，我偏要用github自带的主题(脑子有坑)，老子我自己写！恩，然后花了不少时间来改进这个主题。主要还是三件事：</p>

<ul>
<li>overriding gem-based theme</li>
<li>divding default.html into head.html,header.html&hellip;</li>
<li>using templates inheriting<br /></li>
</ul>

<p>其实都是一些微小的贡献。因为写过django，所以对于模板继承还是liquid语言都是比较熟悉的，改起来还是挺轻松的。</p>

<p>到这里，这个blog已经是你看到的模样了。</p>

<h2 id="部署到puyh-pub">部署到puyh.pub</h2>

<p>这一部分是最坑的，我绕了很多路，当然学的东西也最多。</p>

<p>首先在国内访问github是不稳定的，而且我手头有闲置的域名和服务器，所以如果我不部署到puyh，这是天理难容的。According to 历史的进程，我不能让国内的朋友们借梯子来访问我的私人blog。<br />
首先要解决的问题就是，如何将你的site上传到你的服务器。前提是你的site目录已经是个本地的git仓库，你向github推送的时候用的也是git，所以这个问题是显然的，你用git将你的网站上传到服务器。那么接下来也是easy的，<em>你在服务器建个仓库，然后把你本地的sshkey添加到信任列表去，直接git，将apache的站点地址指向你的git仓库，这不就完了？</em><strong>很easy啊简直美滋滋</strong>。</p>

<p>恩，这里就是第一个坑，关于git的。首先明白一个概念，<strong>git是一个管理版本的工具，并不是一个文件传递工具。</strong>正常情况下，你在服务器上建的仓库是bare repo，也就是裸仓库，也就是说没有文件树，换句话说，<strong>你不能直接在你服务器的仓库上访问你push过去的文件。</strong>要明白这一点，请google bare and none-bare repository。所以直接将站点地址指向git仓库的幻想就破灭了。</p>

<p>对于第一个坑，jekyll docs里提供了一系列<a href="https://jekyllrb.com/docs/deployment-methods/">优雅的解法</a>，我使用的是其中的<code>post-receive-hook</code>。实际上，我的<code>xxx/xxx/xx.git/hooks</code>是没有“post-receive”的，所以我换成了&rdquo;post-update&rdquo;。<strong>hooks实际上是一些shell脚本，所以要赋予它运行的权限和对写入相应目录的权限。</strong>对于检验hooks是否有效，你可以使用<code>./hook-file-name</code>测试一下。</p>

<p>hook搞好之后，你往服务器push一下，你会发现在你服务器站点目录会直接出现，很好，实现了站点的自动部署，很强势。</p>

<p>后面有一个稍微小一点的弯道。是关于apache的。我习惯性的用了<code>sudo apt-get install apache2</code>来安装apache2。那么造成的后果就是它给我安装了能够适应我的系统的最新的apache版本。使用最新版面临的问题就是，你的参考资料是最少的，除了官方文档和近几个月的有关内容，其他的资料都是不可信的。然后我就投入了apache docs的怀抱。实际上他们对我这次建站没有什么太大的帮助，但是我还是发现了一个很棒的东西。</p>

<blockquote>
<p><a href="http://httpd.apache.org/docs/2.4/en/getting-started.html">Apache2.4-Getting Started</a></p>
</blockquote>

<p>深入浅出的讲解一些http，域名解析，动态与静态文件的东西，我感觉受益匪浅。对于这次建站，只需要将apache2 conf文件的站点目录指向jekyll build的目录，可以说是最低层次的apache使用，具体怎么做我就不说了，反正我读官方文档没找出答案。</p>

<p>当然，花费我最多时间的坑是关于gem和bundle的。神tm坑爹，bundle是用来实现gem(ruby语言中的各种模块)的版本管理的，以保证jekyll能够用到自己需要的版本的gem。这个是个神坑，但是如果你不像我这么蠢，一般是不会触发这个坑的。所以大嘎可以当做此事没有发生过。</p>

<h2 id="第一条post">第一条post</h2>

<p>jekyll默认支持markdown标记语言的，你看到的这篇东西就是我用markdown写的，jekyll会负责把它转换成排版整齐 形式齐全的html。所以我是直接用文本编辑器写的。这里我用的是<strong>Atom</strong>，这玩意装在我电脑上好久了，我现在终于可以玩它了，很开心。一开始装Atom只是因为它长得好看，而且它的主页也做的很好看，这让我很动心。</p>

<p>Atom功能强大，长得好看，能够满足我的各种需求，我怎么可能不玩它。当然也是初阶的玩法，我装了几个关于markdown的packages，所以我可以及时预览我的markdown博文，后面我装了一个tool-bar，记不住的markdown语法直接点一下就可以，很方便。再后来我学会了用atom的命令行(我不知道如何准确的称呼它)，所有功能都可以在其中键入，很方便。</p>

<p>我也装了一个terminal插件，也不用来回切窗口的了&hellip; 一些别的近代编辑器我也用过的，刚才说的这些东西在它们身上也可以实现，并不是Atom独有的，<strong>但是不管怎么样，我还是喜欢Atom。</strong></p>

<h1 id="最后">最后</h1>

<p>这篇post写了不短时间，其实写的挺累的哎呀呀。但是还是幸福的，背上插满flag的老将军最终扳回一局。还有半个月就迎来托福一战了，坦诚的讲，我对自己的准备不满意。<strong>如果你能看到这里，我很感动，请你用微信告诉我(我还没在blog里写留言模块&hellip;.</strong></p>

<p>想想后面的日子，日日都是好日啊。这篇post，写给大家，也写给自己。
祝好～<code>PEACE!</code></p>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Puyh</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2017-02-03</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/2017-02-06-retrospect-and-prospect-in-2017/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Retrospect and Prospect in 2017</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
      </nav>
    </footer>
    

  

  

  <div id="comments-gitment"></div>
  <link rel="stylesheet" href="/lib/gitment/gitment-0.0.3.min.css">
    <script src="/lib/gitment/gitment-0.0.3.min.js"></script>
  <script type="text/javascript">
  const gitment = new Gitment({
    id: '2017-02-03-jekyll初体验.markdown',
    title: 'jekyll初体验',
    link: decodeURI(location.href),
    desc: '缘由 我在debug的过程中遇到了各种问题，当我对错误信息进行搜索时，总是会在一些个人blog上得到巧妙的解答，这让我感觉blog不仅是记录自',
    owner: 'puyihua',
    repo: '',
    oauth: {
      client_id: '',
      client_secret: ''
    }
  })
  gitment.render('comments-gitment')
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
  </article>
        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:puyihua1@gmail.com" rel="me" class="iconfont icon-email" title="email"></a>
      <a href="#" rel="me" class="iconfont icon-weibo" title="weibo"></a>
      <a href="#" rel="me" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy; 
    
      2016 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Puyh</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script>





</body>
</html>
